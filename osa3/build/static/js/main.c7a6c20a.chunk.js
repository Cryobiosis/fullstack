(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{16:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(15),o=t.n(r),u=(t(6),t(4)),l=t(2),i=function(e){var n=e.person,t=e.deleteCallback;return c.a.createElement("li",null,n.name," ",n.number,c.a.createElement("button",{onClick:function(){return t(n)}},"delete"))},m=function(e){return c.a.createElement("div",null,c.a.createElement("ul",null,e.persons.map((function(n,t){return c.a.createElement(i,{key:n.name,person:n,deleteCallback:e.deleteCallback})}))))},s=function(e){return c.a.createElement("form",{onSubmit:e.onSubmit},c.a.createElement("div",null,"name:",c.a.createElement("input",{type:"text",name:"name",value:e.name,onChange:e.nameOnChange})),c.a.createElement("div",null,"number:",c.a.createElement("input",{type:"text",name:"number",value:e.number,onChange:e.numberOnChange})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},f=function(e){return c.a.createElement("div",null,"Filter shown with",c.a.createElement("input",{type:"text",name:"filter",value:e.value,onChange:e.callback}))},d=function(e){var n=e.message,t=e.type;return null===n?null:c.a.createElement("div",{className:t},n)},b=t(3),h=t.n(b),p="/api/persons",E=function(){return h.a.get(p).then((function(e){return e.data}))},v=function(e){return h.a.post(p,e).then((function(e){return e.data}))},g=function(e,n){return h.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return h.a.delete(p+"/"+e).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)(""),n=Object(l.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)([]),i=Object(l.a)(o,2),b=i[0],h=i[1],p=Object(a.useState)(""),w=Object(l.a)(p,2),j=w[0],k=w[1],y=Object(a.useState)(""),C=Object(l.a)(y,2),S=C[0],T=C[1],x=Object(a.useState)(null),D=Object(l.a)(x,2),A=D[0],B=D[1],I=Object(a.useState)(null),J=Object(l.a)(I,2),N=J[0],W=J[1];Object(a.useEffect)((function(){E().then((function(e){h(e)}))}),[]);var F=t?b.filter((function(e){return e.name.includes(t)})):b;return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(d,{message:A,type:"info"}),c.a.createElement(d,{message:N,type:"error"}),c.a.createElement(f,{name:t,callback:function(e){r(e.target.value)}}),c.a.createElement("h3",null,"Add a new"),c.a.createElement(s,{onSubmit:function(e){e.preventDefault();var n,t=b.filter((function(e){return e.name===j}));if(t.length>0&&(n=t[0]),n){if(window.confirm("".concat(j," is already added to phonebook, replace old number with new one?"))){var a=Object(u.a)(Object(u.a)({},n),{},{number:S});g(n.id,a).then((function(e){h(b.filter((function(e){return e.id!==n.id})).concat(e)),B("Updated ".concat(j)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){W("the person '".concat(n.name,"' can't be updated. Error: ").concat(e.response.data.error)),setTimeout((function(){W(null)}),5e3)}))}}else{var c={name:j,number:S,date:(new Date).toISOString()};v(c).then((function(e){h(b.concat(e)),B("Added ".concat(j)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){W("the person '".concat(c.name,"' can't be created. Error: ").concat(e.response.data.error)),setTimeout((function(){W(null)}),5e3)}))}k(""),T("")},name:j,nameOnChange:function(e){k(e.target.value)},number:S,numberOnChange:function(e){T(e.target.value)}}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(m,{persons:F,deleteCallback:function(e){window.confirm("Delete ".concat(e.name," ?"))&&O(e.id).then((function(n){h(b.filter((function(n){return n.id!==e.id}))),B("Removed ".concat(e.name)),setTimeout((function(){B(null)}),5e3)})).catch((function(n){W("the person '".concat(e.name,"' was already deleted from server")),setTimeout((function(){W(null)}),5e3)}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,n,t){}},[[16,1,2]]]);
//# sourceMappingURL=main.c7a6c20a.chunk.js.map